#!/bin/bash

/sbin/modprobe fuse

export HADOOP_HOME={$HADOOP_HOME-/usr/lib/hadoop}

if [ -f /etc/default/hadoop-0.20-fuse ]; then
  . /etc/default/hadoop-0.20-fuse
fi

if [ -f $HADOOP_HOME/bin/hadoop-config.sh ] then
  . $HADOOP_HOME/bin/hadoop-config.sh  
fi

if [ "$LD_LIBRARY_PATH" = "" ]; then
  export JVM_LIB=`find $JAVA_HOME/jre/lib -name libjvm.so |tail -n1`
  export LD_LIBRARY_PATH=`dirname $JVM_LIB`:/usr/lib/
fi

for i in ${HADOOP_HOME}/*.jar ${HADOOP_HOME}/lib/*.jar
  do CLASSPATH+=$i:
done

export PATH=$PATH:${HADOOP_HOME}/bin/
env CLASSPATH=$CLASSPATH ${HADOOP_HOME}/bin/fuse_dfs $@
