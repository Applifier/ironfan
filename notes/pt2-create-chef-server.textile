h2. Launch the Chef Server + Hadoop Master node

* _If you already have a chef server, this isn't for you. See instructions in pt?something_
* _If you're using the west coast availability zone, first run @export EC2_URL=https://us-west-1.ec2.amazonaws.com@ to work around a bug in the right_aws gem_

To kick off the master node, go to the cluster_chef directory and run:

<pre><code>
  $ cd ~/path/to/cluster_chef
  $ cloud start -n master -c clouds/zaius_clouds.rb
</code></pre>

You can check the "AWS console":http://bit.ly/awsconsole for progress towards startup. If there are problems, see "Tips and Trobleshooting.":http://github.com/infochimps/cluster_chef/blob/master/notes/pt9-tips-and-troubleshooting.textile

h3. After startup

Now you need a few settings and credentials from the chef server.
Log in to the master node 
<pre><code>
  $ cloud ssh -n master -c clouds/zaius_clouds.rb
</code></pre>


* 
* Find the webui's initial password with @sudo cat /etc/chef/server.rb | grep -i pass@.
* Use it to log in to the chef webui: http://chef.YOURDOMAIN.COM:4040 -- set the admin password once you're logged in.

* Run chef-client to have chef configure itself.

h3. Importing cookbooks, etc.

# Visit @/clients@ in the chef webui, and create a client (named after your machine, probably)
# Paste the private key into ~/.chef/your_client_name.pem
# Create knife.rb to match 

<pre><code>
  knife cookbooks upload --all
  for foo in roles/* ; do echo $foo ; knife role from file $foo ; done
</code></pre>


h2. Next Steps

Next, follow the instructions for "Step 2: Launch the Chef Server / Hadoop Master.":http://github.com/infochimps/cluster_chef/blob/master/notes/pt2-create-chef-server.textile
